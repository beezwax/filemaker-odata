(function(g,R){typeof exports=="object"&&typeof module<"u"?R(exports,require("axios")):typeof define=="function"&&define.amd?define(["exports","axios"],R):(g=typeof globalThis<"u"?globalThis:g||self,R(g["FileMaker OData"]={},g.axios))})(this,(function(g,R){"use strict";var L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ja(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var V,kr;function Wa(){if(kr)return V;kr=1;function a(){this.__data__=[],this.size=0}return V=a,V}var K,Gr;function E(){if(Gr)return K;Gr=1;function a(e,r){return e===r||e!==e&&r!==r}return K=a,K}var X,Hr;function k(){if(Hr)return X;Hr=1;var a=E();function e(r,t){for(var n=r.length;n--;)if(a(r[n][0],t))return n;return-1}return X=e,X}var J,Ur;function Ya(){if(Ur)return J;Ur=1;var a=k(),e=Array.prototype,r=e.splice;function t(n){var i=this.__data__,s=a(i,n);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return J=t,J}var W,Nr;function Za(){if(Nr)return W;Nr=1;var a=k();function e(r){var t=this.__data__,n=a(t,r);return n<0?void 0:t[n][1]}return W=e,W}var Y,Br;function Qa(){if(Br)return Y;Br=1;var a=k();function e(r){return a(this.__data__,r)>-1}return Y=e,Y}var Z,zr;function en(){if(zr)return Z;zr=1;var a=k();function e(r,t){var n=this.__data__,i=a(n,r);return i<0?(++this.size,n.push([r,t])):n[i][1]=t,this}return Z=e,Z}var Q,Vr;function G(){if(Vr)return Q;Vr=1;var a=Wa(),e=Ya(),r=Za(),t=Qa(),n=en();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var c=s[o];this.set(c[0],c[1])}}return i.prototype.clear=a,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=t,i.prototype.set=n,Q=i,Q}var ee,Kr;function rn(){if(Kr)return ee;Kr=1;var a=G();function e(){this.__data__=new a,this.size=0}return ee=e,ee}var re,Xr;function tn(){if(Xr)return re;Xr=1;function a(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}return re=a,re}var te,Jr;function an(){if(Jr)return te;Jr=1;function a(e){return this.__data__.get(e)}return te=a,te}var ae,Wr;function nn(){if(Wr)return ae;Wr=1;function a(e){return this.__data__.has(e)}return ae=a,ae}var ne,Yr;function Zr(){if(Yr)return ne;Yr=1;var a=typeof L=="object"&&L&&L.Object===Object&&L;return ne=a,ne}var ie,Qr;function $(){if(Qr)return ie;Qr=1;var a=Zr(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=a||e||Function("return this")();return ie=r,ie}var se,et;function rt(){if(et)return se;et=1;var a=$(),e=a.Symbol;return se=e,se}var oe,tt;function sn(){if(tt)return oe;tt=1;var a=rt(),e=Object.prototype,r=e.hasOwnProperty,t=e.toString,n=a?a.toStringTag:void 0;function i(s){var o=r.call(s,n),u=s[n];try{s[n]=void 0;var c=!0}catch{}var h=t.call(s);return c&&(o?s[n]=u:delete s[n]),h}return oe=i,oe}var ue,at;function on(){if(at)return ue;at=1;var a=Object.prototype,e=a.toString;function r(t){return e.call(t)}return ue=r,ue}var ce,nt;function H(){if(nt)return ce;nt=1;var a=rt(),e=sn(),r=on(),t="[object Null]",n="[object Undefined]",i=a?a.toStringTag:void 0;function s(o){return o==null?o===void 0?n:t:i&&i in Object(o)?e(o):r(o)}return ce=s,ce}var he,it;function O(){if(it)return he;it=1;function a(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return he=a,he}var fe,st;function le(){if(st)return fe;st=1;var a=H(),e=O(),r="[object AsyncFunction]",t="[object Function]",n="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var u=a(o);return u==t||u==n||u==r||u==i}return fe=s,fe}var de,ot;function un(){if(ot)return de;ot=1;var a=$(),e=a["__core-js_shared__"];return de=e,de}var ve,ut;function cn(){if(ut)return ve;ut=1;var a=un(),e=(function(){var t=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function r(t){return!!e&&e in t}return ve=r,ve}var pe,ct;function hn(){if(ct)return pe;ct=1;var a=Function.prototype,e=a.toString;function r(t){if(t!=null){try{return e.call(t)}catch{}try{return t+""}catch{}}return""}return pe=r,pe}var ge,ht;function fn(){if(ht)return ge;ht=1;var a=le(),e=cn(),r=O(),t=hn(),n=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,c=o.hasOwnProperty,h=RegExp("^"+u.call(c).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(d){if(!r(d)||e(d))return!1;var y=a(d)?h:i;return y.test(t(d))}return ge=l,ge}var _e,ft;function ln(){if(ft)return _e;ft=1;function a(e,r){return e?.[r]}return _e=a,_e}var ye,lt;function be(){if(lt)return ye;lt=1;var a=fn(),e=ln();function r(t,n){var i=e(t,n);return a(i)?i:void 0}return ye=r,ye}var qe,dt;function vt(){if(dt)return qe;dt=1;var a=be(),e=$(),r=a(e,"Map");return qe=r,qe}var Ce,pt;function U(){if(pt)return Ce;pt=1;var a=be(),e=a(Object,"create");return Ce=e,Ce}var Te,gt;function dn(){if(gt)return Te;gt=1;var a=U();function e(){this.__data__=a?a(null):{},this.size=0}return Te=e,Te}var Re,_t;function vn(){if(_t)return Re;_t=1;function a(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Re=a,Re}var Oe,yt;function pn(){if(yt)return Oe;yt=1;var a=U(),e="__lodash_hash_undefined__",r=Object.prototype,t=r.hasOwnProperty;function n(i){var s=this.__data__;if(a){var o=s[i];return o===e?void 0:o}return t.call(s,i)?s[i]:void 0}return Oe=n,Oe}var Ae,bt;function gn(){if(bt)return Ae;bt=1;var a=U(),e=Object.prototype,r=e.hasOwnProperty;function t(n){var i=this.__data__;return a?i[n]!==void 0:r.call(i,n)}return Ae=t,Ae}var we,qt;function _n(){if(qt)return we;qt=1;var a=U(),e="__lodash_hash_undefined__";function r(t,n){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=a&&n===void 0?e:n,this}return we=r,we}var me,Ct;function yn(){if(Ct)return me;Ct=1;var a=dn(),e=vn(),r=pn(),t=gn(),n=_n();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var c=s[o];this.set(c[0],c[1])}}return i.prototype.clear=a,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=t,i.prototype.set=n,me=i,me}var $e,Tt;function bn(){if(Tt)return $e;Tt=1;var a=yn(),e=G(),r=vt();function t(){this.size=0,this.__data__={hash:new a,map:new(r||e),string:new a}}return $e=t,$e}var je,Rt;function qn(){if(Rt)return je;Rt=1;function a(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return je=a,je}var Ie,Ot;function N(){if(Ot)return Ie;Ot=1;var a=qn();function e(r,t){var n=r.__data__;return a(t)?n[typeof t=="string"?"string":"hash"]:n.map}return Ie=e,Ie}var Se,At;function Cn(){if(At)return Se;At=1;var a=N();function e(r){var t=a(this,r).delete(r);return this.size-=t?1:0,t}return Se=e,Se}var xe,wt;function Tn(){if(wt)return xe;wt=1;var a=N();function e(r){return a(this,r).get(r)}return xe=e,xe}var Me,mt;function Rn(){if(mt)return Me;mt=1;var a=N();function e(r){return a(this,r).has(r)}return Me=e,Me}var Pe,$t;function On(){if($t)return Pe;$t=1;var a=N();function e(r,t){var n=a(this,r),i=n.size;return n.set(r,t),this.size+=n.size==i?0:1,this}return Pe=e,Pe}var Fe,jt;function An(){if(jt)return Fe;jt=1;var a=bn(),e=Cn(),r=Tn(),t=Rn(),n=On();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var c=s[o];this.set(c[0],c[1])}}return i.prototype.clear=a,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=t,i.prototype.set=n,Fe=i,Fe}var De,It;function wn(){if(It)return De;It=1;var a=G(),e=vt(),r=An(),t=200;function n(i,s){var o=this.__data__;if(o instanceof a){var u=o.__data__;if(!e||u.length<t-1)return u.push([i,s]),this.size=++o.size,this;o=this.__data__=new r(u)}return o.set(i,s),this.size=o.size,this}return De=n,De}var Le,St;function mn(){if(St)return Le;St=1;var a=G(),e=rn(),r=tn(),t=an(),n=nn(),i=wn();function s(o){var u=this.__data__=new a(o);this.size=u.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,Le=s,Le}var Ee,xt;function Mt(){if(xt)return Ee;xt=1;var a=be(),e=(function(){try{var r=a(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Ee=e,Ee}var ke,Pt;function Ge(){if(Pt)return ke;Pt=1;var a=Mt();function e(r,t,n){t=="__proto__"&&a?a(r,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[t]=n}return ke=e,ke}var He,Ft;function Dt(){if(Ft)return He;Ft=1;var a=Ge(),e=E();function r(t,n,i){(i!==void 0&&!e(t[n],i)||i===void 0&&!(n in t))&&a(t,n,i)}return He=r,He}var Ue,Lt;function $n(){if(Lt)return Ue;Lt=1;function a(e){return function(r,t,n){for(var i=-1,s=Object(r),o=n(r),u=o.length;u--;){var c=o[e?u:++i];if(t(s[c],c,s)===!1)break}return r}}return Ue=a,Ue}var Ne,Et;function jn(){if(Et)return Ne;Et=1;var a=$n(),e=a();return Ne=e,Ne}var I={exports:{}};I.exports;var kt;function In(){return kt||(kt=1,(function(a,e){var r=$(),t=e&&!e.nodeType&&e,n=t&&!0&&a&&!a.nodeType&&a,i=n&&n.exports===t,s=i?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;function u(c,h){if(h)return c.slice();var l=c.length,d=o?o(l):new c.constructor(l);return c.copy(d),d}a.exports=u})(I,I.exports)),I.exports}var Be,Gt;function Sn(){if(Gt)return Be;Gt=1;var a=$(),e=a.Uint8Array;return Be=e,Be}var ze,Ht;function xn(){if(Ht)return ze;Ht=1;var a=Sn();function e(r){var t=new r.constructor(r.byteLength);return new a(t).set(new a(r)),t}return ze=e,ze}var Ve,Ut;function Mn(){if(Ut)return Ve;Ut=1;var a=xn();function e(r,t){var n=t?a(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.length)}return Ve=e,Ve}var Ke,Nt;function Pn(){if(Nt)return Ke;Nt=1;function a(e,r){var t=-1,n=e.length;for(r||(r=Array(n));++t<n;)r[t]=e[t];return r}return Ke=a,Ke}var Xe,Bt;function Fn(){if(Bt)return Xe;Bt=1;var a=O(),e=Object.create,r=(function(){function t(){}return function(n){if(!a(n))return{};if(e)return e(n);t.prototype=n;var i=new t;return t.prototype=void 0,i}})();return Xe=r,Xe}var Je,zt;function Dn(){if(zt)return Je;zt=1;function a(e,r){return function(t){return e(r(t))}}return Je=a,Je}var We,Vt;function Kt(){if(Vt)return We;Vt=1;var a=Dn(),e=a(Object.getPrototypeOf,Object);return We=e,We}var Ye,Xt;function Jt(){if(Xt)return Ye;Xt=1;var a=Object.prototype;function e(r){var t=r&&r.constructor,n=typeof t=="function"&&t.prototype||a;return r===n}return Ye=e,Ye}var Ze,Wt;function Ln(){if(Wt)return Ze;Wt=1;var a=Fn(),e=Kt(),r=Jt();function t(n){return typeof n.constructor=="function"&&!r(n)?a(e(n)):{}}return Ze=t,Ze}var Qe,Yt;function S(){if(Yt)return Qe;Yt=1;function a(e){return e!=null&&typeof e=="object"}return Qe=a,Qe}var er,Zt;function En(){if(Zt)return er;Zt=1;var a=H(),e=S(),r="[object Arguments]";function t(n){return e(n)&&a(n)==r}return er=t,er}var rr,Qt;function ea(){if(Qt)return rr;Qt=1;var a=En(),e=S(),r=Object.prototype,t=r.hasOwnProperty,n=r.propertyIsEnumerable,i=a((function(){return arguments})())?a:function(s){return e(s)&&t.call(s,"callee")&&!n.call(s,"callee")};return rr=i,rr}var tr,ra;function ta(){if(ra)return tr;ra=1;var a=Array.isArray;return tr=a,tr}var ar,aa;function na(){if(aa)return ar;aa=1;var a=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=a}return ar=e,ar}var nr,ia;function ir(){if(ia)return nr;ia=1;var a=le(),e=na();function r(t){return t!=null&&e(t.length)&&!a(t)}return nr=r,nr}var sr,sa;function kn(){if(sa)return sr;sa=1;var a=ir(),e=S();function r(t){return e(t)&&a(t)}return sr=r,sr}var x={exports:{}},or,oa;function Gn(){if(oa)return or;oa=1;function a(){return!1}return or=a,or}x.exports;var ua;function ca(){return ua||(ua=1,(function(a,e){var r=$(),t=Gn(),n=e&&!e.nodeType&&e,i=n&&!0&&a&&!a.nodeType&&a,s=i&&i.exports===n,o=s?r.Buffer:void 0,u=o?o.isBuffer:void 0,c=u||t;a.exports=c})(x,x.exports)),x.exports}var ur,ha;function Hn(){if(ha)return ur;ha=1;var a=H(),e=Kt(),r=S(),t="[object Object]",n=Function.prototype,i=Object.prototype,s=n.toString,o=i.hasOwnProperty,u=s.call(Object);function c(h){if(!r(h)||a(h)!=t)return!1;var l=e(h);if(l===null)return!0;var d=o.call(l,"constructor")&&l.constructor;return typeof d=="function"&&d instanceof d&&s.call(d)==u}return ur=c,ur}var cr,fa;function Un(){if(fa)return cr;fa=1;var a=H(),e=na(),r=S(),t="[object Arguments]",n="[object Array]",i="[object Boolean]",s="[object Date]",o="[object Error]",u="[object Function]",c="[object Map]",h="[object Number]",l="[object Object]",d="[object RegExp]",y="[object Set]",q="[object String]",C="[object WeakMap]",T="[object ArrayBuffer]",j="[object DataView]",v="[object Float32Array]",Lr="[object Float64Array]",Er="[object Int8Array]",F="[object Int16Array]",w="[object Int32Array]",b="[object Uint8Array]",p="[object Uint8ClampedArray]",z="[object Uint16Array]",_="[object Uint32Array]",f={};f[v]=f[Lr]=f[Er]=f[F]=f[w]=f[b]=f[p]=f[z]=f[_]=!0,f[t]=f[n]=f[T]=f[i]=f[j]=f[s]=f[o]=f[u]=f[c]=f[h]=f[l]=f[d]=f[y]=f[q]=f[C]=!1;function D(m){return r(m)&&e(m.length)&&!!f[a(m)]}return cr=D,cr}var hr,la;function Nn(){if(la)return hr;la=1;function a(e){return function(r){return e(r)}}return hr=a,hr}var M={exports:{}};M.exports;var da;function Bn(){return da||(da=1,(function(a,e){var r=Zr(),t=e&&!e.nodeType&&e,n=t&&!0&&a&&!a.nodeType&&a,i=n&&n.exports===t,s=i&&r.process,o=(function(){try{var u=n&&n.require&&n.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}})();a.exports=o})(M,M.exports)),M.exports}var fr,va;function pa(){if(va)return fr;va=1;var a=Un(),e=Nn(),r=Bn(),t=r&&r.isTypedArray,n=t?e(t):a;return fr=n,fr}var lr,ga;function _a(){if(ga)return lr;ga=1;function a(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return lr=a,lr}var dr,ya;function zn(){if(ya)return dr;ya=1;var a=Ge(),e=E(),r=Object.prototype,t=r.hasOwnProperty;function n(i,s,o){var u=i[s];(!(t.call(i,s)&&e(u,o))||o===void 0&&!(s in i))&&a(i,s,o)}return dr=n,dr}var vr,ba;function Vn(){if(ba)return vr;ba=1;var a=zn(),e=Ge();function r(t,n,i,s){var o=!i;i||(i={});for(var u=-1,c=n.length;++u<c;){var h=n[u],l=s?s(i[h],t[h],h,i,t):void 0;l===void 0&&(l=t[h]),o?e(i,h,l):a(i,h,l)}return i}return vr=r,vr}var pr,qa;function Kn(){if(qa)return pr;qa=1;function a(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}return pr=a,pr}var gr,Ca;function Ta(){if(Ca)return gr;Ca=1;var a=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(t,n){var i=typeof t;return n=n??a,!!n&&(i=="number"||i!="symbol"&&e.test(t))&&t>-1&&t%1==0&&t<n}return gr=r,gr}var _r,Ra;function Xn(){if(Ra)return _r;Ra=1;var a=Kn(),e=ea(),r=ta(),t=ca(),n=Ta(),i=pa(),s=Object.prototype,o=s.hasOwnProperty;function u(c,h){var l=r(c),d=!l&&e(c),y=!l&&!d&&t(c),q=!l&&!d&&!y&&i(c),C=l||d||y||q,T=C?a(c.length,String):[],j=T.length;for(var v in c)(h||o.call(c,v))&&!(C&&(v=="length"||y&&(v=="offset"||v=="parent")||q&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||n(v,j)))&&T.push(v);return T}return _r=u,_r}var yr,Oa;function Jn(){if(Oa)return yr;Oa=1;function a(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}return yr=a,yr}var br,Aa;function Wn(){if(Aa)return br;Aa=1;var a=O(),e=Jt(),r=Jn(),t=Object.prototype,n=t.hasOwnProperty;function i(s){if(!a(s))return r(s);var o=e(s),u=[];for(var c in s)c=="constructor"&&(o||!n.call(s,c))||u.push(c);return u}return br=i,br}var qr,wa;function ma(){if(wa)return qr;wa=1;var a=Xn(),e=Wn(),r=ir();function t(n){return r(n)?a(n,!0):e(n)}return qr=t,qr}var Cr,$a;function Yn(){if($a)return Cr;$a=1;var a=Vn(),e=ma();function r(t){return a(t,e(t))}return Cr=r,Cr}var Tr,ja;function Zn(){if(ja)return Tr;ja=1;var a=Dt(),e=In(),r=Mn(),t=Pn(),n=Ln(),i=ea(),s=ta(),o=kn(),u=ca(),c=le(),h=O(),l=Hn(),d=pa(),y=_a(),q=Yn();function C(T,j,v,Lr,Er,F,w){var b=y(T,v),p=y(j,v),z=w.get(p);if(z){a(T,v,z);return}var _=F?F(b,p,v+"",T,j,w):void 0,f=_===void 0;if(f){var D=s(p),m=!D&&u(p),Xa=!D&&!m&&d(p);_=p,D||m||Xa?s(b)?_=b:o(b)?_=t(b):m?(f=!1,_=e(p,!0)):Xa?(f=!1,_=r(p,!0)):_=[]:l(p)||i(p)?(_=b,i(b)?_=q(b):(!h(b)||c(b))&&(_=n(p))):f=!1}f&&(w.set(p,_),Er(_,p,Lr,F,w),w.delete(p)),a(T,v,_)}return Tr=C,Tr}var Rr,Ia;function Qn(){if(Ia)return Rr;Ia=1;var a=mn(),e=Dt(),r=jn(),t=Zn(),n=O(),i=ma(),s=_a();function o(u,c,h,l,d){u!==c&&r(c,function(y,q){if(d||(d=new a),n(y))t(u,c,q,h,o,l,d);else{var C=l?l(s(u,q),y,q+"",u,c,d):void 0;C===void 0&&(C=y),e(u,q,C)}},i)}return Rr=o,Rr}var Or,Sa;function xa(){if(Sa)return Or;Sa=1;function a(e){return e}return Or=a,Or}var Ar,Ma;function ei(){if(Ma)return Ar;Ma=1;function a(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}return Ar=a,Ar}var wr,Pa;function ri(){if(Pa)return wr;Pa=1;var a=ei(),e=Math.max;function r(t,n,i){return n=e(n===void 0?t.length-1:n,0),function(){for(var s=arguments,o=-1,u=e(s.length-n,0),c=Array(u);++o<u;)c[o]=s[n+o];o=-1;for(var h=Array(n+1);++o<n;)h[o]=s[o];return h[n]=i(c),a(t,this,h)}}return wr=r,wr}var mr,Fa;function ti(){if(Fa)return mr;Fa=1;function a(e){return function(){return e}}return mr=a,mr}var $r,Da;function ai(){if(Da)return $r;Da=1;var a=ti(),e=Mt(),r=xa(),t=e?function(n,i){return e(n,"toString",{configurable:!0,enumerable:!1,value:a(i),writable:!0})}:r;return $r=t,$r}var jr,La;function ni(){if(La)return jr;La=1;var a=800,e=16,r=Date.now;function t(n){var i=0,s=0;return function(){var o=r(),u=e-(o-s);if(s=o,u>0){if(++i>=a)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}return jr=t,jr}var Ir,Ea;function ii(){if(Ea)return Ir;Ea=1;var a=ai(),e=ni(),r=e(a);return Ir=r,Ir}var Sr,ka;function si(){if(ka)return Sr;ka=1;var a=xa(),e=ri(),r=ii();function t(n,i){return r(e(n,i,a),n+"")}return Sr=t,Sr}var xr,Ga;function oi(){if(Ga)return xr;Ga=1;var a=E(),e=ir(),r=Ta(),t=O();function n(i,s,o){if(!t(o))return!1;var u=typeof s;return(u=="number"?e(o)&&r(s,o.length):u=="string"&&s in o)?a(o[s],i):!1}return xr=n,xr}var Mr,Ha;function ui(){if(Ha)return Mr;Ha=1;var a=si(),e=oi();function r(t){return a(function(n,i){var s=-1,o=i.length,u=o>1?i[o-1]:void 0,c=o>2?i[2]:void 0;for(u=t.length>3&&typeof u=="function"?(o--,u):void 0,c&&e(i[0],i[1],c)&&(u=o<3?void 0:u,o=1),n=Object(n);++s<o;){var h=i[s];h&&t(n,h,s,u)}return n})}return Mr=r,Mr}var Pr,Ua;function ci(){if(Ua)return Pr;Ua=1;var a=Qn(),e=ui(),r=e(function(t,n,i){a(t,n,i)});return Pr=r,Pr}var hi=ci();const Na=Ja(hi);class Fr extends Error{data;constructor(e,r){super(e),this.name="RequestError",this.data=r}}const A=a=>a instanceof Fr;class P{credentials;agent;constructor(e,r){this.credentials=e,this.agent=r}async get(e,r){try{return await R.get(e,Na({...r},{httpsAgent:this.agent,headers:this.credentials.authorizationHeaders}))}catch(t){throw new Fr(t instanceof Error?t.message:String(t),R.isAxiosError(t)&&t.response?t.response.data:void 0)}}async post(e,r,t){try{return await R.post(e,r,Na({...t},{httpsAgent:this.agent,headers:this.credentials.authorizationHeaders}))}catch(n){throw new Fr(n instanceof Error?n.message:String(n),R.isAxiosError(n)&&n.response?n.response.data:void 0)}}}class B{get authorizationHeaders(){return{}}}class Ba{requestId;identifier;constructor({requestId:e,identifier:r}){this.requestId=e,this.identifier=r}get authorizationHeaders(){return{"OData-Version":"4.0","OData-MaxVersion":"4.0","X-FM-Data-OAuth-Request-Id":this.requestId,"X-FM-Data-OAuth-Identifier":this.identifier}}}class za{username;password;constructor({username:e,password:r}){this.username=e,this.password=r}get authorizationHeaders(){return{Authorization:`Basic ${btoa(`${this.username}:${this.password}`)}`}}}class fi{authorization;constructor(e){this.authorization=e}get authorizationHeaders(){return{Authorization:this.authorization}}}class li{server;database;request;constructor({server:e,database:r}){this.server=e,this.database=r,this.request=new P(new B)}url(e){return`https://${this.server}/fmi/data/vLatest/databases/${this.database}/${e}`}async getAuthType(){const r=(await this.request.get(`https://${this.server}/fmws/oauthproviderinfo`,{headers:{"Content-Type":"application/json"}})).data.data;return r!==void 0?r.Provider[0].Name:"basic"}async getOAuthUrl({trackingId:e,provider:r,returnUrl:t}){const n=`https://${this.server}/oauth/getoauthurl?trackingID=${e}&provider=${r}&address=${this.server}&X-FMS-OAuth-AuthType=2`,i=await this.request.get(n,{headers:{"X-FMS-Application-Type":"9","X-FMS-Application-Version":"15","X-FMS-Return-URL":t??`https://${this.server}/oauth-handler`}}),s=i.data,o=i.headers["x-fms-request-id"]??"";if(o===void 0||o==="")throw new Error('Did not get back an "X-FMS-Request-ID" header from FileMaker');return{redirectUrl:s,requestId:o}}async getTokenUsingOAuth({requestId:e,identifier:r}){return(await this.request.post(this.url("sessions"),{headers:{"Content-Type":"application/json","X-FM-Data-OAuth-Request-Id":e,"X-FM-Data-OAuth-Identifier":r}})).headers["X-FM-Data-Access-Token"]}async getTokenUsingCredentials({username:e,password:r}){return(await this.request.post(this.url("sessions"),{headers:{"Content-Type":"application/json",Authorization:`Basic ${btoa(`${e}:${r}`)}`}})).data.response.token??null}}class di{config;table;record;constructor({config:e,table:r,record:t}){this.config=e,this.table=r,this.record=t}toRequestBody({boundary:e,changeId:r}){const{ID:t,...n}=this.record,i=JSON.stringify(n);return`--${e}\r
Content-Type: application/http\r
Content-ID: ${r}\r
\r
PATCH ${this.url(this.table)}('${this.record.ID}') HTTP/1.1\r
Content-Type: application/json\r
Content-Length: ${this.byteLength(i)}\r
\r
`+i+`\r
`}parseResponse(e){const r=/HTTP\/1.1\s+(\d+)\s/.exec(e);if(r===null)throw new Error("Could not find status in response");const t=Number(r[1]);if(t>=300){const{error:i}=JSON.parse(e.substring(e.indexOf("{")).trim());throw new Error(`[UPDATE OPERATION: ${this.table}] ${i.message}`)}const n=JSON.parse(e.substring(e.indexOf("{")).trim());return{status:t,body:n}}url(e){return`https://${this.config.server}/fmi/odata/v4/${this.config.database}/${e}`}byteLength(e){return new TextEncoder().encode(e).byteLength}}class vi{config;table;record;constructor({config:e,table:r,record:t}){this.config=e,this.table=r,this.record=t}toRequestBody({boundary:e,changeId:r}){const t=JSON.stringify(this.record);return`--${e}\r
Content-Type: application/http\r
Content-ID: ${r}\r
\r
POST ${this.url(this.table)} HTTP/1.1\r
Content-Type: application/json\r
Content-Length: ${this.byteLength(t)}\r
\r
`+t+`\r
`}parseResponse(e){const r=/HTTP\/1.1\s+(\d+)\s/.exec(e);if(r===null)throw new Error("Could not find status in response");const t=Number(r[1]);if(t>=300){const{error:n}=JSON.parse(e.substring(e.indexOf("{")).trim());throw new Error(`[CREATE OPERATION: ${this.table}] ${n.message}`)}return{status:t,body:null}}url(e){return`https://${this.config.server}/fmi/odata/v4/${this.config.database}/${e}`}byteLength(e){return new TextEncoder().encode(e).byteLength}}class pi{config;table;id;constructor({config:e,table:r,id:t}){this.config=e,this.table=r,this.id=t}toRequestBody({boundary:e,changeId:r}){return`--${e}\r
Content-Type: application/http\r
Content-ID: ${r}\r
\r
DELETE ${this.url(this.table)}('${this.id}') HTTP/1.1\r
\r
\r
`}parseResponse(e){const r=/HTTP\/1.1\s+(\d+)\s/.exec(e);if(r===null)throw new Error("Could not find status in response");const t=Number(r[1]);if(t>=300){const{error:n}=JSON.parse(e.substring(e.indexOf("{")).trim());throw new Error(`[DELETE OPERATION: ${this.table}] ${n.message}`)}return{status:t,body:null}}url(e){return`https://${this.config.server}/fmi/odata/v4/${this.config.database}/${e}`}}class gi{operations;callback;config;constructor(e,r){this.config=e,this.callback=r,this.operations=[]}update({table:e,record:r}){return this.operations.push(new di({config:this.config,table:e,record:r})),this}create({table:e,record:r}){return this.operations.push(new vi({config:this.config,table:e,record:r})),this}delete({table:e,id:r}){return this.operations.push(new pi({config:this.config,table:e,id:r})),this}execute(){return this.callback(this.operations)}}const Va=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const e=Math.random()*16|0;return(a=="x"?e:e&3|8).toString(16)});class Dr{config;logger;request;constructor({server:e,database:r,logger:t,request:n}){this.config={server:e,database:r},this.logger=t,this.request=n}url(e){return`https://${this.config.server}/fmi/odata/v4/${this.config.database}/${e}`}async metadata(){return(await this.request.get(this.url("$metadata"))).data}async subquery(e){this.log(`[FileMaker] Get records from ${e.table}`),this.log("Options:"),this.log(e.options),this.log(`URL: ${this.url(`${e.table}('${e.recordId}')/${e.path}`)}?${this.parameterize(e.options)}`);try{return(await this.request.get(`${this.url(`${e.table}('${e.recordId}')/${e.path}`)}?${this.parameterize(e.options)}`)).data.value}catch(r){throw A(r)&&(this.log("Get records HTTP error"),this.log(r.data)),r}}async getRecords(e,r){this.log(`[FileMaker] Get records from ${e}`),this.log("Options:"),this.log(r),this.log(`URL: ${this.url(e)}?${this.parameterize(r)}`);try{return(await this.request.get(`${this.url(e)}?${this.parameterize(r)}`)).data.value}catch(t){throw A(t)&&(this.log("Get records HTTP error"),this.log(t.data)),t}}async getRecordsWithCount(e,r){this.log(`[FileMaker] Get records with count from ${e}`),this.log("Options:"),this.log(r);const t={...r,$count:!0};this.log(`URL: ${this.url(e)}?${this.parameterize(t)}`);try{const n=await this.request.get(`${this.url(e)}?${this.parameterize(t)}`);return{data:n.data.value,count:n.data["@odata.count"]??0}}catch(n){throw A(n)&&(this.log("Get records with count HTTP error"),this.log(n.data)),n}}async getRecord(e,r){this.log(`[FileMaker] Get records from ${e}`),this.log(`ID: ${r}`);try{return(await this.request.get(`${this.url(e)}('${encodeURIComponent(r)}')`)).data}catch(t){throw A(t)&&this.log(t.data),t}}async getValue(e,r,t){try{return(await this.request.get(`${this.url(e)}('${encodeURIComponent(r)}')/${encodeURIComponent(t)}/$value`,{responseType:"arraybuffer"})).data}catch(n){throw A(n)&&this.log(n.data),n}}async crossjoin({tables:e,$filter:r,$expand:t}){try{return(await this.request.get(`${this.url("$crossjoin")}(${e.join(",")})?$filter=${r}&$expand=${t}`,{headers:{Accept:"application/atom+xml"}})).data}catch(n){throw A(n)&&this.log(n.data),n}}batch(){return new gi(this.config,async e=>{const r=`batch_${Va()}`,t=`changeset_${Va()}`,n=`--${r}\r
Content-Type: multipart/mixed; boundary=${t}\r
\r
`+e.map((i,s)=>i.toRequestBody({boundary:t,changeId:s+1})).join("")+`--${t}--\r
--${r}--\r
`;try{const i=await this.request.post(this.url("$batch"),n,{headers:{"Content-Type":`multipart/mixed; boundary=${r}`}}),s=/boundary=(.+?)\r\n/.exec(i.data);if(s===null)throw new Error("Could not find changeset");const o=s[0].split("=")[1].trim();return i.data.split(`--${o}`).slice(1,-1).map((c,h)=>e[h].parseResponse(c))}catch(i){throw A(i)&&this.log(i.data),i}})}async script(e,r){this.log(`[FileMaker] Running script ${e} with parameters:`),this.log({scriptParameterValue:r});const t=await this.request.post(this.url(`Script.${encodeURIComponent(e)}`),r===void 0?null:{scriptParameterValue:r},{headers:{"Content-Type":"application/json"}});this.log(`[FileMaker] Script ${e} finished. Response:`),this.log(t);const n=t.data.scriptResult.code===0;return{success:n,data:n?t.data.scriptResult.resultParameter:void 0}}parameterize(e){if(e===void 0)return"";const r={};return e.$select!==void 0&&(r.$select=e.$select.map(t=>t==="ID"?'"ID"':t).join(",")),e.$top!==void 0&&(r.$top=e.$top),e.$skip!==void 0&&(r.$skip=e.$skip),e.$filter!==void 0&&(r.$filter=e.$filter),e.$expand!==void 0&&(r.$expand=e.$expand),e.$orderby!==void 0&&(r.$orderby=encodeURIComponent(e.$orderby.join(" "))),e.$count!==void 0&&(r.$count=e.$count?"true":"false"),Object.entries(r).map(([t,n])=>`${t}=${n}`).join("&")}log(e){return this.logger.log(e)}}class Ka{log(e){console.dir(e,{depth:null})}}class _i{log(){}}class yi{server;database;agent;logger;constructor({server:e,database:r,agent:t,logger:n}){this.server=e,this.database=r,this.agent=t,this.logger=n??new Ka}withBasicAuth({username:e,password:r}){const t=new za({username:e,password:r}),n=new P(t,this.agent);return new Dr({server:this.server,database:this.database,logger:this.logger,request:n})}withOAuth({requestId:e,identifier:r}){const t=new Ba({requestId:e,identifier:r}),n=new P(t,this.agent);return new Dr({server:this.server,database:this.database,logger:this.logger,request:n})}async getOAuthUrl({trackingId:e,provider:r,returnUrl:t}){const n=new P(new B,this.agent),i=`https://${this.server}/oauth/getoauthurl?trackingID=${e}&provider=${r}&address=${this.server}&X-FMS-OAuth-AuthType=2`,s=await n.get(i,{headers:{"X-FMS-Application-Type":"9","X-FMS-Application-Version":"15","X-FMS-Return-URL":t??`https://${this.server}/oauth-handler`}}),o=s.data,u=s.headers["x-fms-request-id"]??"";if(u===void 0||u==="")throw new Error('Did not get back an "X-FMS-Request-ID" header from FileMaker');return{redirectUrl:o,requestId:u}}async getAuthTypes(){const t=(await new P(new B,this.agent).get(`https://${this.server}/fmws/oauthproviderinfo`,{headers:{"Content-Type":"application/json"}})).data.data;return t!==void 0?t.Provider.map(n=>n.Name):["basic"]}url(e){return`https://${this.server}/fmi/odata/v4/${this.database}/${e}`}}g.FileMaker=Dr,g.FileMakerAuthenticator=li,g.FileMakerBasicCredentials=za,g.FileMakerClient=yi,g.FileMakerOAuthCredentials=Ba,g.FileMakerRawCredentials=fi,g.Logger=Ka,g.NullFileMakerCredentials=B,g.NullLogger=_i,Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})}));
